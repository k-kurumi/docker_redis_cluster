#!/bin/bash

env

# commander_1 | DEBIAN_FRONTEND=noninteractive
# commander_1 | HOME=/root
# commander_1 | HOSTNAME=72fb2e627d37
# commander_1 | LC_ALL=en_US.UTF-8
# commander_1 | PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
# commander_1 | PWD=/data
# commander_1 | REDISA1_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISA1_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISA1_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISA1_1_NAME=/redis_commander_1/redisa1_1
# commander_1 | REDISA1_1_PORT=tcp://172.17.0.65:6379
# commander_1 | REDISA1_1_PORT_6379_TCP=tcp://172.17.0.65:6379
# commander_1 | REDISA1_1_PORT_6379_TCP_ADDR=172.17.0.65
# commander_1 | REDISA1_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISA1_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISA1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISA1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISA1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISA1_NAME=/redis_commander_1/redisa1
# commander_1 | REDISA1_PORT=tcp://172.17.0.65:6379
# commander_1 | REDISA1_PORT_6379_TCP=tcp://172.17.0.65:6379
# commander_1 | REDISA1_PORT_6379_TCP_ADDR=172.17.0.65
# commander_1 | REDISA1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISA1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISA2_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISA2_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISA2_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISA2_1_NAME=/redis_commander_1/redisa2_1
# commander_1 | REDISA2_1_PORT=tcp://172.17.0.67:6379
# commander_1 | REDISA2_1_PORT_6379_TCP=tcp://172.17.0.67:6379
# commander_1 | REDISA2_1_PORT_6379_TCP_ADDR=172.17.0.67
# commander_1 | REDISA2_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISA2_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISA2_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISA2_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISA2_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISA2_NAME=/redis_commander_1/redisa2
# commander_1 | REDISA2_PORT=tcp://172.17.0.67:6379
# commander_1 | REDISA2_PORT_6379_TCP=tcp://172.17.0.67:6379
# commander_1 | REDISA2_PORT_6379_TCP_ADDR=172.17.0.67
# commander_1 | REDISA2_PORT_6379_TCP_PORT=6379
# commander_1 | REDISA2_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISB1_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISB1_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISB1_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISB1_1_NAME=/redis_commander_1/redisb1_1
# commander_1 | REDISB1_1_PORT=tcp://172.17.0.69:6379
# commander_1 | REDISB1_1_PORT_6379_TCP=tcp://172.17.0.69:6379
# commander_1 | REDISB1_1_PORT_6379_TCP_ADDR=172.17.0.69
# commander_1 | REDISB1_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISB1_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISB1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISB1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISB1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISB1_NAME=/redis_commander_1/redisb1
# commander_1 | REDISB1_PORT=tcp://172.17.0.69:6379
# commander_1 | REDISB1_PORT_6379_TCP=tcp://172.17.0.69:6379
# commander_1 | REDISB1_PORT_6379_TCP_ADDR=172.17.0.69
# commander_1 | REDISB1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISB1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISB2_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISB2_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISB2_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISB2_1_NAME=/redis_commander_1/redisb2_1
# commander_1 | REDISB2_1_PORT=tcp://172.17.0.61:6379
# commander_1 | REDISB2_1_PORT_6379_TCP=tcp://172.17.0.61:6379
# commander_1 | REDISB2_1_PORT_6379_TCP_ADDR=172.17.0.61
# commander_1 | REDISB2_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISB2_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISB2_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISB2_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISB2_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISB2_NAME=/redis_commander_1/redisb2
# commander_1 | REDISB2_PORT=tcp://172.17.0.61:6379
# commander_1 | REDISB2_PORT_6379_TCP=tcp://172.17.0.61:6379
# commander_1 | REDISB2_PORT_6379_TCP_ADDR=172.17.0.61
# commander_1 | REDISB2_PORT_6379_TCP_PORT=6379
# commander_1 | REDISB2_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISC1_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISC1_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISC1_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISC1_1_NAME=/redis_commander_1/redisc1_1
# commander_1 | REDISC1_1_PORT=tcp://172.17.0.71:6379
# commander_1 | REDISC1_1_PORT_6379_TCP=tcp://172.17.0.71:6379
# commander_1 | REDISC1_1_PORT_6379_TCP_ADDR=172.17.0.71
# commander_1 | REDISC1_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISC1_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISC1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISC1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISC1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISC1_NAME=/redis_commander_1/redisc1
# commander_1 | REDISC1_PORT=tcp://172.17.0.71:6379
# commander_1 | REDISC1_PORT_6379_TCP=tcp://172.17.0.71:6379
# commander_1 | REDISC1_PORT_6379_TCP_ADDR=172.17.0.71
# commander_1 | REDISC1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISC1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISC2_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISC2_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISC2_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISC2_1_NAME=/redis_commander_1/redisc2_1
# commander_1 | REDISC2_1_PORT=tcp://172.17.0.63:6379
# commander_1 | REDISC2_1_PORT_6379_TCP=tcp://172.17.0.63:6379
# commander_1 | REDISC2_1_PORT_6379_TCP_ADDR=172.17.0.63
# commander_1 | REDISC2_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDISC2_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDISC2_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDISC2_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDISC2_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDISC2_NAME=/redis_commander_1/redisc2
# commander_1 | REDISC2_PORT=tcp://172.17.0.63:6379
# commander_1 | REDISC2_PORT_6379_TCP=tcp://172.17.0.63:6379
# commander_1 | REDISC2_PORT_6379_TCP_ADDR=172.17.0.63
# commander_1 | REDISC2_PORT_6379_TCP_PORT=6379
# commander_1 | REDISC2_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_REDISA1_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDIS_REDISA1_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDIS_REDISA1_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDIS_REDISA1_1_NAME=/redis_commander_1/redis_redisa1_1
# commander_1 | REDIS_REDISA1_1_PORT=tcp://172.17.0.65:6379
# commander_1 | REDIS_REDISA1_1_PORT_6379_TCP=tcp://172.17.0.65:6379
# commander_1 | REDIS_REDISA1_1_PORT_6379_TCP_ADDR=172.17.0.65
# commander_1 | REDIS_REDISA1_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDIS_REDISA1_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_REDISA2_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDIS_REDISA2_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDIS_REDISA2_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDIS_REDISA2_1_NAME=/redis_commander_1/redis_redisa2_1
# commander_1 | REDIS_REDISA2_1_PORT=tcp://172.17.0.67:6379
# commander_1 | REDIS_REDISA2_1_PORT_6379_TCP=tcp://172.17.0.67:6379
# commander_1 | REDIS_REDISA2_1_PORT_6379_TCP_ADDR=172.17.0.67
# commander_1 | REDIS_REDISA2_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDIS_REDISA2_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_REDISB1_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDIS_REDISB1_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDIS_REDISB1_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDIS_REDISB1_1_NAME=/redis_commander_1/redis_redisb1_1
# commander_1 | REDIS_REDISB1_1_PORT=tcp://172.17.0.69:6379
# commander_1 | REDIS_REDISB1_1_PORT_6379_TCP=tcp://172.17.0.69:6379
# commander_1 | REDIS_REDISB1_1_PORT_6379_TCP_ADDR=172.17.0.69
# commander_1 | REDIS_REDISB1_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDIS_REDISB1_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_REDISB2_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDIS_REDISB2_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDIS_REDISB2_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDIS_REDISB2_1_NAME=/redis_commander_1/redis_redisb2_1
# commander_1 | REDIS_REDISB2_1_PORT=tcp://172.17.0.61:6379
# commander_1 | REDIS_REDISB2_1_PORT_6379_TCP=tcp://172.17.0.61:6379
# commander_1 | REDIS_REDISB2_1_PORT_6379_TCP_ADDR=172.17.0.61
# commander_1 | REDIS_REDISB2_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDIS_REDISB2_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_REDISC1_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDIS_REDISC1_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDIS_REDISC1_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDIS_REDISC1_1_NAME=/redis_commander_1/redis_redisc1_1
# commander_1 | REDIS_REDISC1_1_PORT=tcp://172.17.0.71:6379
# commander_1 | REDIS_REDISC1_1_PORT_6379_TCP=tcp://172.17.0.71:6379
# commander_1 | REDIS_REDISC1_1_PORT_6379_TCP_ADDR=172.17.0.71
# commander_1 | REDIS_REDISC1_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDIS_REDISC1_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_REDISC2_1_ENV_DEBIAN_FRONTEND=noninteractive
# commander_1 | REDIS_REDISC2_1_ENV_LC_ALL=en_US.UTF-8
# commander_1 | REDIS_REDISC2_1_ENV_REDIS_VERSION=3.0.1
# commander_1 | REDIS_REDISC2_1_NAME=/redis_commander_1/redis_redisc2_1
# commander_1 | REDIS_REDISC2_1_PORT=tcp://172.17.0.63:6379
# commander_1 | REDIS_REDISC2_1_PORT_6379_TCP=tcp://172.17.0.63:6379
# commander_1 | REDIS_REDISC2_1_PORT_6379_TCP_ADDR=172.17.0.63
# commander_1 | REDIS_REDISC2_1_PORT_6379_TCP_PORT=6379
# commander_1 | REDIS_REDISC2_1_PORT_6379_TCP_PROTO=tcp
# commander_1 | REDIS_VERSION=3.0.1
# commander_1 | SHLVL=1
# commander_1 | _=/usr/bin/env


echo "wait for redis-server 5s..."
sleep 5


echo "create cluster"
yes yes | /data/redis-${REDIS_VERSION}/src/redis-trib.rb create --replicas 1 \
  ${REDISA1_PORT_6379_TCP_ADDR}:${REDISA1_PORT_6379_TCP_PORT} \
  ${REDISB1_PORT_6379_TCP_ADDR}:${REDISB1_PORT_6379_TCP_PORT} \
  ${REDISC1_PORT_6379_TCP_ADDR}:${REDISC1_PORT_6379_TCP_PORT} \
  ${REDISA2_PORT_6379_TCP_ADDR}:${REDISA2_PORT_6379_TCP_PORT} \
  ${REDISB2_PORT_6379_TCP_ADDR}:${REDISB2_PORT_6379_TCP_PORT} \
  ${REDISC2_PORT_6379_TCP_ADDR}:${REDISC2_PORT_6379_TCP_PORT}


while true
do
  /bin/bash
done
